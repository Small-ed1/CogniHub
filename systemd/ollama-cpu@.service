[Unit]
Description=Ollama CPU Service
Documentation=https://docs.ollama.com
After=network-online.target

[Service]
Type=simple
User=%i
Environment="OLLAMA_HOST=127.0.0.1:11435"
Environment="GGML_VK_VISIBLE_DEVICES=-1"  # Disable GPU
Environment="OLLAMA_NUM_PARALLEL=4"  # More CPU threads
ExecStart=/usr/bin/ollama serve
Restart=always
RestartSec=3

[Install]
WantedBy=default.target